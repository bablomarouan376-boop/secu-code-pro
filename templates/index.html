<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>SecuCode Pro | طارق مصطفى</title>
    <link rel="manifest" href="/static/manifest.json">
    <style>
        :root { --primary: #3b82f6; --bg: #020617; --glass: rgba(15, 23, 42, 0.85); }
        
        * { box-sizing: border-box; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: system-ui, -apple-system, sans-serif; 
            background: var(--bg); color: white; margin: 0; 
            min-height: 100vh; display: flex; flex-direction: column; padding: 15px;
            background-image: radial-gradient(circle at top right, #1e3a8a 0%, #020617 70%);
        }

        .main-wrapper { margin: auto; width: 100%; max-width: 650px; }

        .glass-card {
            background: var(--glass); backdrop-filter: blur(25px); 
            border-radius: 2.5rem; border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 3rem 1.5rem; box-shadow: 0 40px 100px rgba(0,0,0,0.6);
            text-align: center;
        }

        .logo-badge {
            background: rgba(59, 130, 246, 0.15); color: var(--primary);
            padding: 8px 18px; border-radius: 20px; font-weight: 900;
            font-size: 0.75rem; letter-spacing: 2px; border: 1px solid rgba(59, 130, 246, 0.3);
            text-transform: uppercase;
        }

        h1 { font-size: clamp(2.2rem, 9vw, 3.8rem); font-weight: 900; margin: 1.5rem 0 0.5rem; line-height: 1.1; }
        .tagline { color: #94a3b8; font-size: 1.05rem; margin-bottom: 2.5rem; }

        /* حاوية الإدخال المرنة لحل مشكلة الموبايل */
        .input-group { display: flex; flex-direction: column; gap: 12px; width: 100%; }

        input {
            background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(255, 255, 255, 0.1);
            color: white; padding: 18px; border-radius: 1.2rem; font-size: 1.1rem;
            outline: none; text-align: center; width: 100%;
        }

        input:focus { border-color: var(--primary); box-shadow: 0 0 20px rgba(59, 130, 246, 0.3); }

        button {
            background: var(--primary); color: white; border: none; padding: 18px;
            border-radius: 1.2rem; font-weight: 900; font-size: 1.15rem; 
            cursor: pointer; width: 100%; box-shadow: 0 10px 25px rgba(59, 130, 246, 0.4);
        }

        button:active { transform: scale(0.97); }

        .results { 
            margin-top: 2.5rem; display: none; padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.08);
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp { from { opacity: 0; transform: translateY(15px); } }

        .score { font-size: 4.5rem; font-weight: 900; line-height: 1; margin: 10px 0; }

        footer { margin-top: auto; padding: 25px; text-align: center; color: #475569; font-weight: bold; font-size: 0.75rem; letter-spacing: 1px; }

        /* تعديلات الكمبيوتر (الشاشات الكبيرة) */
        @media (min-width: 768px) {
            .glass-card { padding: 4rem 3rem; }
            .input-group { flex-direction: row; background: rgba(0,0,0,0.3); padding: 8px; border-radius: 1.5rem; }
            input { flex: 1; border: none; text-align: right; background: transparent; padding-right: 25px; }
            button { width: auto; min-width: 180px; }
        }
    </style>
</head>
<body>
    <div class="main-wrapper">
        <div class="glass-card">
            <span class="logo-badge">SecuCode Pro V2.0</span>
            <h1>SecuCode Pro<span style="color:var(--primary)">.</span></h1>
            <p class="tagline">نظام الفحص الأمني الذكي لتحليل الروابط المشبوهة</p>
            
            <div class="input-group">
                <input type="url" id="targetUrl" placeholder="أدخل الرابط للفحص الفوري..." spellcheck="false">
                <button onclick="performScan()" id="scanBtn">ابدأ الفحص</button>
            </div>

            <div id="resultArea" class="results">
                <div id="scoreDisplay" class="score">00</div>
                <h2 id="verdictText" style="margin: 5px 0;">--</h2>
                <p id="metaInfo" style="color: #64748b; font-size: 0.9rem; margin-top: 10px;"></p>
            </div>
        </div>
    </div>
    <footer>DESIGNED & DEVELOPED BY TAREK MOSTAFA</footer>

    <script>
        async function performScan() {
            const input = document.getElementById('targetUrl');
            const btn = document.getElementById('scanBtn');
            const resArea = document.getElementById('resultArea');
            
            if(!input.value) return;

            btn.innerText = "جاري التحليل...";
            btn.disabled = true;

            try {
                const response = await fetch('/analyze', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({link: input.value})
                });
                const data = await response.json();
                
                resArea.style.display = "block";
                const scoreBox = document.getElementById('scoreDisplay');
                const verdict = document.getElementById('verdictText');
                
                scoreBox.innerText = data.points;
                verdict.innerText = data.risk_score;
                
                const safe = data.points < 25;
                scoreBox.style.color = safe ? "#22c55e" : "#ef4444";
                verdict.style.color = safe ? "#22c55e" : "#ef4444";
                document.getElementById('metaInfo').innerText = "تم إكمال الفحص في " + data.analysis_time + " ثانية.";
            } catch(e) {
                alert("خطأ في الاتصال بالسيرفر");
            } finally {
                btn.innerText = "ابدأ الفحص";
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
