<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SecuCode Pro | طارق مصطفى</title>
    <link rel="manifest" href="/static/manifest.json">
    <style>
        :root { --primary: #3b82f6; --bg: #020617; --glass: rgba(15, 23, 42, 0.85); }
        * { box-sizing: border-box; transition: 0.3s ease; }
        body { 
            font-family: system-ui, -apple-system, sans-serif; background: var(--bg); color: white; margin: 0; 
            min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 15px;
            background-image: radial-gradient(circle at top, #1e3a8a 0%, #020617 100%);
        }
        .container { width: 100%; max-width: 600px; text-align: center; }
        .glass-card {
            background: var(--glass); backdrop-filter: blur(20px); border-radius: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1); padding: 2rem 1.5rem;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        }
        h1 { font-size: 2.5rem; font-weight: 900; margin: 10px 0; }
        .input-group { margin-top: 2rem; display: flex; flex-direction: column; gap: 10px; }
        input {
            background: rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.1);
            color: white; padding: 15px; border-radius: 1rem; font-size: 1rem; outline: none; text-align: center;
        }
        button {
            background: var(--primary); color: white; border: none; padding: 15px;
            border-radius: 1rem; font-weight: bold; cursor: pointer; box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
        }
        .results { margin-top: 20px; display: none; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px; }
        .score { font-size: 4rem; font-weight: 900; color: var(--primary); }
        footer { margin-top: 2rem; color: #475569; font-weight: bold; font-size: 0.7rem; letter-spacing: 1px; }

        /* تعديلات الكمبيوتر */
        @media (min-width: 768px) {
            .input-group { flex-direction: row; background: rgba(0,0,0,0.3); padding: 5px; border-radius: 1.2rem; }
            input { flex: 1; border: none; text-align: right; }
            button { width: auto; min-width: 150px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="glass-card">
            <div style="color:var(--primary); font-size:0.7rem; font-weight:900; letter-spacing:2px;">SECUCODE PRO V2.0</div>
            <h1>SecuCode Pro</h1>
            <p style="color:#94a3b8; margin:0;">نظام الفحص الأمني الذكي لتحليل الروابط.</p>
            <div class="input-group">
                <input type="url" id="u" placeholder="أدخل الرابط للفحص الفوري...">
                <button onclick="s()">ابدأ الفحص</button>
            </div>
            <div id="r" class="results">
                <div id="p" class="score">00</div>
                <h2 id="v" style="margin:0;">تحليل آمن</h2>
                <p id="i" style="color:#64748b; font-size:0.8rem; margin-top:10px;"></p>
            </div>
        </div>
        <footer>DESIGNED BY TAREK MOSTAFA</footer>
    </div>
    <script>
        async function s() {
            const val = document.getElementById('u').value;
            const btn = document.querySelector('button');
            if(!val) return;
            btn.innerText = "جاري التحليل...";
            try {
                const res = await fetch('/analyze', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({link: val})
                });
                const d = await res.json();
                document.getElementById('r').style.display = "block";
                document.getElementById('p').innerText = d.points;
                document.getElementById('v').innerText = d.risk_score;
                document.getElementById('p').style.color = d.points < 25 ? "#22c55e" : "#ef4444";
                document.getElementById('i').innerText = "تم الفحص في " + d.analysis_time + " ثانية.";
            } catch(e) { alert("خطأ في الاتصال"); }
            btn.innerText = "ابدأ الفحص";
        }
    </script>
</body>
</html>
