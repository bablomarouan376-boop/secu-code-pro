<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>SecuCode Pro | طارق مصطفى</title>
    <link rel="manifest" href="/static/manifest.json">
    <style>
        :root { --primary: #3b82f6; --bg: #020617; --glass: rgba(15, 23, 42, 0.85); }
        * { box-sizing: border-box; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        body { 
            font-family: 'Cairo', system-ui, sans-serif; background: var(--bg); color: white; margin: 0; 
            min-height: 100vh; display: flex; flex-direction: column; padding: 20px;
            background-image: radial-gradient(circle at top right, #1e3a8a 0%, #020617 60%);
        }
        .main-container { margin: auto; width: 100%; max-width: 800px; }
        .glass-card {
            background: var(--glass); backdrop-filter: blur(20px); border-radius: 2.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1); padding: 3rem 1.5rem;
            box-shadow: 0 40px 100px rgba(0,0,0,0.6); text-align: center;
        }
        .logo-badge {
            background: rgba(59, 130, 246, 0.15); color: var(--primary);
            padding: 8px 20px; border-radius: 20px; font-weight: 900;
            font-size: 0.8rem; letter-spacing: 2px; border: 1px solid rgba(59, 130, 246, 0.3);
        }
        h1 { font-size: clamp(2.5rem, 10vw, 4.5rem); font-weight: 900; margin: 1.5rem 0 0.5rem; }
        .tagline { color: #94a3b8; font-size: 1.1rem; margin-bottom: 3rem; }
        .input-wrapper { display: flex; flex-direction: column; gap: 15px; }
        input {
            background: rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.1);
            color: white; padding: 20px; border-radius: 1.2rem; font-size: 1.1rem;
            outline: none; text-align: center;
        }
        input:focus { border-color: var(--primary); box-shadow: 0 0 20px rgba(59, 130, 246, 0.3); }
        button {
            background: var(--primary); color: white; border: none; padding: 20px;
            border-radius: 1.2rem; font-weight: 900; font-size: 1.2rem; cursor: pointer;
        }
        button:hover { transform: translateY(-3px); filter: brightness(1.2); }
        .results { margin-top: 3rem; display: none; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 2rem; }
        .score { font-size: 5rem; font-weight: 900; line-height: 1; }
        footer { margin-top: auto; padding: 30px; text-align: center; color: #475569; font-weight: bold; font-size: 0.8rem; }

        /* تنسيق الكمبيوتر */
        @media (min-width: 768px) {
            .input-wrapper { flex-direction: row; background: rgba(0,0,0,0.4); padding: 10px; border-radius: 1.5rem; }
            input { border: none; text-align: right; flex: 1; }
            button { width: auto; min-width: 200px; }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="glass-card">
            <span class="logo-badge">SECURE CODE PRO</span>
            <h1>SecuCode Pro<span style="color:var(--primary)">.</span></h1>
            <p class="tagline">نظام فحص أمني ذكي لتحليل الروابط المشبوهة</p>
            
            <div class="input-wrapper">
                <input type="url" id="linkInput" placeholder="ضع الرابط هنا لتبدأ الفحص...">
                <button onclick="startAnalysis()" id="scanBtn">فحص الآن</button>
            </div>

            <div id="resultBox" class="results">
                <div id="scoreVal" class="score">00</div>
                <h2 id="statusText" style="margin:10px 0;">--</h2>
                <p id="timeText" style="color:#64748b; font-weight:bold;"></p>
            </div>
        </div>
    </div>
    <footer>&copy; 2026 SecuCode Pro | BY TAREK MOSTAFA</footer>

    <script>
        async function startAnalysis() {
            const inp = document.getElementById('linkInput');
            const btn = document.getElementById('scanBtn');
            const res = document.getElementById('resultBox');
            if(!inp.value) return;

            btn.innerText = "جاري التحليل...";
            btn.disabled = true;

            try {
                const response = await fetch('/analyze', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({link: inp.value})
                });
                const data = await response.json();
                res.style.display = "block";
                document.getElementById('scoreVal').innerText = data.points;
                document.getElementById('statusText').innerText = data.risk_score;
                const isSafe = data.points < 25;
                document.getElementById('scoreVal').style.color = isSafe ? "#22c55e" : "#ef4444";
                document.getElementById('statusText').style.color = isSafe ? "#22c55e" : "#ef4444";
                document.getElementById('timeText').innerText = "وقت الفحص: " + data.analysis_time + " ثانية";
            } catch(e) { alert("خطأ في السيرفر"); }
            btn.innerText = "فحص الآن"; btn.disabled = false;
        }
    </script>
</body>
</html>
